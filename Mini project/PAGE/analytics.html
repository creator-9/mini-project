<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Financial Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: #000;
        color: #fff;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        min-height: 100vh;
      }

      .container {
        display: flex;
        min-height: 100vh;
        width: 100%;
        background-color: #000;
      }
    </style>
  </head>
  <body class="bg-black">
    <div class="min-h-screen w-full bg-black flex">
      <!-- SIDEBAR -->
      <aside
        id="sidebar"
        class="hidden fixed md:sticky md:flex w-64 h-screen bg-zinc-900 border-r border-zinc-800 flex-col transition-all duration-300 z-50 top-0 left-0"
      >
        <div class="p-6 border-b border-zinc-800">
          <h2 class="text-xl font-semibold text-white">Menu</h2>
        </div>
        <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
          <a
            href="dashboard.html"
            class="block px-4 py-2 text-zinc-400 rounded-lg hover:bg-zinc-800 hover:text-white transition"
            >Dashboard</a
          >
          <a
            href="budget.html"
            class="block px-4 py-2 text-zinc-400 rounded-lg hover:bg-zinc-800 hover:text-white transition"
            >Budget</a
          >
          <a
            href="analytics.html"
            class="block px-4 py-2 bg-zinc-800 text-white rounded-lg"
            >Analytics</a
          >
          <a
            href="transacition.html"
            class="block px-4 py-2 text-zinc-400 rounded-lg hover:bg-zinc-800 hover:text-white transition"
            >Transactions</a
          >
          <a
            href="settings.html"
            class="block px-4 py-2 text-zinc-400 rounded-lg hover:bg-zinc-800 hover:text-white transition"
            >Settings</a
          >
        </nav>
        <button
          id="closeSidebar"
          class="md:hidden m-4 px-4 py-2 bg-zinc-800 text-white rounded-lg"
        >
          Close
        </button>
      </aside>

      <!-- OVERLAY FOR MOBILE -->
      <div
        id="sidebarOverlay"
        class="hidden fixed inset-0 bg-black/50 z-40 md:hidden"
      ></div>

      <!-- MAIN CONTENT -->
      <main class="flex-1 p-4 md:p-8 w-full">
        <!-- HEADER -->
        <div class="mb-8">
          <div
            class="flex items-start gap-4 md:items-center md:justify-between"
          >
            <!-- MOBILE HAMBURGER -->
            <button
              id="openSidebar"
              class="p-2 rounded-md bg-zinc-900 border border-zinc-800 text-white md:hidden flex-shrink-0"
            >
              <svg
                class="w-6 h-6"
                stroke="currentColor"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-width="2"
                  stroke-linecap="round"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>

            <!-- TITLE -->
            <div class="pt-1 flex-1">
              <h1 class="text-2xl md:text-3xl font-semibold text-white mb-1">
                Financial Analytics
              </h1>
              <p class="text-zinc-400">
                Detailed insights into your financial activity
              </p>
            </div>
          </div>
        </div>

        <!-- FILTERS CARD -->
        <div class="bg-zinc-900 rounded-lg border border-zinc-800 p-6 mb-8">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Time Range -->
            <div class="filter-group">
              <label for="timeRange" class="block text-sm text-zinc-400 mb-2"
                >Time Range</label
              >
              <select
                id="timeRange"
                class="w-full px-4 py-2 bg-black border border-zinc-700 rounded-lg text-white focus:border-zinc-500 focus:outline-none"
              >
                <option value="7days">Last 7 days</option>
                <option value="30days" selected>Last 30 days</option>
                <option value="3months">Last 3 months</option>
                <option value="6months">Last 6 months</option>
                <option value="year">This year</option>
              </select>
            </div>

            <!-- Category -->
            <div class="filter-group">
              <label
                for="focusCategory"
                class="block text-sm text-zinc-400 mb-2"
                >Focus Category</label
              >
              <select
                id="focusCategory"
                class="w-full px-4 py-2 bg-black border border-zinc-700 rounded-lg text-white focus:border-zinc-500 focus:outline-none"
              >
                <option value="all" selected>All Categories</option>
                <option value="food">Food</option>
                <option value="transport">Transport</option>
                <option value="entertainment">Entertainment</option>
                <option value="utilities">Utilities</option>
                <option value="shopping">Shopping</option>
              </select>
            </div>
          </div>
        </div>

        <!-- CHART BLOCK -->
        <div class="bg-zinc-900 rounded-lg border border-zinc-800 p-6 mb-8">
          <h2 class="text-xl font-semibold text-white mb-6">
            Overall Spending by Category
          </h2>
          <div
            class="bg-gradient-to-br from-zinc-800 to-zinc-900 rounded-lg h-80 flex items-center justify-center text-zinc-400"
          >
            Chart visualization would be displayed here using Chart.js or
            similar
          </div>
        </div>

        <!-- CATEGORY BREAKDOWN -->
        <div
          id="categoryBreakdown"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
        >
          <!-- Category cards will be generated here by JavaScript -->
        </div>
      </main>
    </div>

    <script>
      // MOCK DATA
      const mockUser = {
        categories: [
          "Food",
          "Transport",
          "Entertainment",
          "Utilities",
          "Shopping",
        ],
      };

      const mockExpenses = [
        {
          id: 1,
          title: "Lunch at Cafe",
          category: "Food",
          amount: 450,
          date: "2025-12-13",
          type: "expense",
        },
        {
          id: 2,
          title: "Uber Ride",
          category: "Transport",
          amount: 280,
          date: "2025-12-12",
          type: "expense",
        },
        {
          id: 3,
          title: "Movie Tickets",
          category: "Entertainment",
          amount: 600,
          date: "2025-12-11",
          type: "expense",
        },
        {
          id: 4,
          title: "Electricity Bill",
          category: "Utilities",
          amount: 1200,
          date: "2025-12-10",
          type: "expense",
        },
        {
          id: 5,
          title: "Grocery Shopping",
          category: "Food",
          amount: 2500,
          date: "2025-12-09",
          type: "expense",
        },
        {
          id: 6,
          title: "Gas Station",
          category: "Transport",
          amount: 800,
          date: "2025-12-08",
          type: "expense",
        },
        {
          id: 7,
          title: "Online Shopping",
          category: "Shopping",
          amount: 3500,
          date: "2025-12-07",
          type: "expense",
        },
        {
          id: 8,
          title: "Concert Ticket",
          category: "Entertainment",
          amount: 1500,
          date: "2025-12-06",
          type: "expense",
        },
        {
          id: 9,
          title: "Water Bill",
          category: "Utilities",
          amount: 400,
          date: "2025-12-05",
          type: "expense",
        },
        {
          id: 10,
          title: "Dinner",
          category: "Food",
          amount: 1200,
          date: "2025-12-04",
          type: "expense",
        },
        {
          id: 11,
          title: "T-shirt",
          category: "Shopping",
          amount: 599,
          date: "2025-12-03",
          type: "expense",
        },
        {
          id: 12,
          title: "Gas",
          category: "Transport",
          amount: 1500,
          date: "2025-12-02",
          type: "expense",
        },
      ];

      let selectedTimeRange = "30days";
      let selectedCategory = "all";
      let isSidebarOpen = false;

      // DOM Elements
      const sidebar = document.getElementById("sidebar");
      const sidebarOverlay = document.getElementById("sidebarOverlay");
      const openSidebarBtn = document.getElementById("openSidebar");
      const closeSidebarBtn = document.getElementById("closeSidebar");
      const timeRangeSelect = document.getElementById("timeRange");
      const focusCategorySelect = document.getElementById("focusCategory");
      const categoryBreakdown = document.getElementById("categoryBreakdown");

      // SIDEBAR FUNCTIONS
      const openSidebar = () => {
        sidebar.classList.remove("hidden");
        sidebarOverlay.classList.remove("hidden");
        isSidebarOpen = true;
      };

      const closeSidebar = () => {
        sidebar.classList.add("hidden");
        sidebarOverlay.classList.add("hidden");
        isSidebarOpen = false;
      };

      // EVENT LISTENERS FOR SIDEBAR
      openSidebarBtn.addEventListener("click", openSidebar);
      closeSidebarBtn.addEventListener("click", closeSidebar);
      sidebarOverlay.addEventListener("click", closeSidebar);

      // EVENT LISTENERS FOR FILTERS
      timeRangeSelect.addEventListener("change", (e) => {
        selectedTimeRange = e.target.value;
        renderCategoryBreakdown();
      });

      focusCategorySelect.addEventListener("change", (e) => {
        selectedCategory = e.target.value;
        renderCategoryBreakdown();
      });

      // HELPER FUNCTIONS
      function getFilterDate(timeRange) {
        const now = new Date();
        const filterDate = new Date();

        switch (timeRange) {
          case "7days":
            filterDate.setDate(now.getDate() - 7);
            break;
          case "30days":
            filterDate.setDate(now.getDate() - 30);
            break;
          case "3months":
            filterDate.setMonth(now.getMonth() - 3);
            break;
          case "6months":
            filterDate.setMonth(now.getMonth() - 6);
            break;
          case "year":
            filterDate.setFullYear(now.getFullYear() - 1);
            break;
        }

        return filterDate;
      }

      function filterExpenses() {
        const filterDate = getFilterDate(selectedTimeRange);

        let filtered = mockExpenses.filter((exp) => {
          const d = new Date(exp.date);
          return d >= filterDate && exp.type === "expense";
        });

        if (selectedCategory !== "all") {
          filtered = filtered.filter(
            (exp) => exp.category.toLowerCase() === selectedCategory
          );
        }

        return filtered;
      }

      function formatCurrency(amount) {
        return amount.toLocaleString("en-IN", {
          minimumFractionDigits: 0,
          maximumFractionDigits: 0,
        });
      }

      function renderCategoryBreakdown() {
        const filteredExpenses = filterExpenses();
        categoryBreakdown.innerHTML = "";

        mockUser.categories.forEach((category) => {
          const categoryExpenses = filteredExpenses.filter(
            (exp) => exp.category.toLowerCase() === category.toLowerCase()
          );

          const total = categoryExpenses.reduce(
            (sum, exp) => sum + exp.amount,
            0
          );

          const card = document.createElement("div");
          card.className =
            "bg-zinc-900 p-6 rounded-lg border border-zinc-800 hover:border-zinc-700 transition";

          const expenseWord =
            categoryExpenses.length === 1 ? "expense" : "expenses";

          let recentExpensesHTML = "";
          if (categoryExpenses.length > 0) {
            recentExpensesHTML = `
                        <div class="mt-4 border-t border-zinc-800 pt-4">
                            <p class="text-xs text-zinc-500 mb-3">Recent expenses:</p>
                            <div class="space-y-2">
                                ${categoryExpenses
                                  .slice(0, 3)
                                  .map(
                                    (exp) => `
                                    <div class="flex justify-between items-center">
                                        <span class="text-xs text-zinc-400 truncate">${
                                          exp.title
                                        }</span>
                                        <span class="text-xs text-zinc-300 font-medium">₹${formatCurrency(
                                          exp.amount
                                        )}</span>
                                    </div>
                                `
                                  )
                                  .join("")}
                            </div>
                        </div>
                    `;
          } else {
            recentExpensesHTML =
              '<p class="text-xs text-zinc-500 mt-4">No expenses yet</p>';
          }

          card.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-start mb-3">
                            <div>
                                <h3 class="text-lg font-semibold text-white">${category}</h3>
                                <p class="text-xs text-zinc-500">${
                                  categoryExpenses.length
                                } ${expenseWord}</p>
                            </div>
                        </div>
                        <p class="text-3xl font-bold text-white">₹${formatCurrency(
                          total
                        )}</p>
                    </div>
                    ${recentExpensesHTML}
                `;

          categoryBreakdown.appendChild(card);
        });
      }

      // INITIAL RENDER
      renderCategoryBreakdown();
    </script>
  </body>
</html>
